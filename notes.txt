Epoch: 1-60hz, th-ch=20 th-epo=5, deleting all projections instead of applying them, recalibration between runs, sfreq=100hz, rejecting EOG with ICA
Epochs2: 0.1-80hz, th-ch=20 th-epo=5
resample before storing epochs ?

do not take the diag but average a few points around it.

Decoding:
 v3: first real try
 v4: one_object testing all combination of negative trials.
 v5: imgloc images
 v6: all orig
 v7: now classic with wrong tmintmax
 v8: with correct tmintmax filter = 1-60hz
v9: decoder carré vs autres formes dans le localizer, pas vs tous les autres mots.
passe haut à 0.1 pour avoir plus de chance de voir les effets soutenus. - >fitler 0.03-80
Entrainer sur imgloc IMG and test on imgloc WORDS.
Entrainer décodage couleur sur 2 obj. Utiliser toutes les époques ? ie couleur sur le 1er et sur le 2eme objet ?
Splitter par match/nonmatch pour le décodage (dès l'entrainement), car on teste des choses différentes.
-> back to v1 on real subjects

pooler les essais du loc et de 1obj pour améliorer la generalization.?

train on blocks of 100ms and then gen? or on the whole window, then gen with rolling window


Meeting 27-10-20:
Mesure résumée : pool par fenetre après chaque mot et moyenne
La généralisation est-elle "diagonale" après le mot, ou bien off-diagonale ? Si on a un processing très différent on peut s'attendre a du off-diagonale. 
Decoder la position des mots ? Ou bien l'inclure dans la RSA. 
Inclure un flash sur tout l'écran, un truc gris ou salt and pepper, sur la moitié des essais, 500ms avant l'image. 
Figure finale : on veut un truc a la JR ou a la Pedro avec un timecourse par propriété d'interet: forme1, couleur1, relation, forme2, couleur2, objet individuels, match/nonmatch 
Trace de la prédiction pour chaque décodeur : quand est-ce que la perf est bonne ET quand est-ce qu'on a une réactivation. On peut les moyenner comme on le fait pour l'AUC. 
Quand on a une réactivation, est ce qu'elle est jointe pour nom et adj (forme et couleur), ou bien séparée ? Quel délai ? Comment sont ségrégées les réactivations d'un objet et de l'autre ? => binding problem.

v1: 200hz decoding. no smoothing.
v2: decoding at 100hz and smooting 11
v3: Same but with half of the trials in order to check whether we can changethe design or not.  DELETED
new v3: smoothing 21, filter 0.01, no lp, no channel rejection., 10 folds.
v4: same with no baseline. 50hz
v5: same with actually no baseline. 50hz
v6: smth
v7: RSA with first and 2nd object, and with xdawn. Also decoding with ridgeCV and scoring=auc.
v8: same with logistic - not launched
v9: OVO for RSA and decoding_ovr and subsampling majority classes for decoding. Also with baseline correction.
+ v8: RSA with matching trials only (+ OVO)
v10: split queries (during training but not yet test) for decoding - no baseline. RSA: back to OVR because OVO scoring is fucked up (gives majority class, not proba for each class) ; + weighted average instead of macro.
v11: baseline. LogRegCV partout. Saving accuracy as well as AUC.
remove equalize trials!
v12: OVR, now averaging AUC over strat grouped folds. RidgeCV proba -> looks like the AUC problem is solved !!
v13: OVR+decoding, SVC and gridsearch -> weaker than the one before ...
v14: ridgecv, repeated strat grouped kfold with 10 repeats.
v15: same with 100 repeats
v16: Decoding same colour, shape, or object. 10folds.
v17: OVR with LR (no CV), 5folds. Also all conditions. 
v18: sklearn's confusion matric func for RSA. 
v19: + reducdim 0.99 + LRCV
v20: same but with left and right queries for RSA. Also SVC with gridsearch for decoding window. 

BACK TO V1
c1: windows: .15-.3s for early and .4-.55 for late
v2: windows now .1-.4s for early and .45-.75s for late.
v3: cat10, no reduc dim. All launching all decoding. 


FOR SUB 25: NOW CORRECTLY CORRECTING FOR MISSING TRIAL (BEFORE THE INDEX WAS WRONG)

Use principal angles between subspaces? https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.subspace_angles.html




TODO: add split queries for test queries as well (currently only for training queries).
split queries not working well, we are missing trials for some queries in some folds, leading to having 0 examplars of some classes. 
split with grey screen 

angle between first and second color (or shape) encoding in scenes ? How is it compared to signle objects?
add n_repeats to the config



make ICA separately for each block!!! or not at all...


Binding condition: triangle bleue vs other triangles, generalized to triangle bleue vs other triangles when the other object is blue (and optionally also not a triangle)



Preprocessing notes:
bad subjects (chance-level AUC) : 03 - 09 - 10 - 12 - 14
weird perf before t0: 07 - 11 - 13 - 16

to look into: 
sub01 - very weird looking PSD on 1, 2, 4 and 5, - run4: shity spiked dominating the evoked.
sub02 - run3 (one_obj). Weird very high amplitude ramping.
sub03 - run8 (1obj) : that asshole kept the button pressed for a whole trial. Maybe trials are shifted, resulting in bad decoding perf.
sub06: run1 one response was too quick. Wwird peak in the PSD at ! 12hz and ~30hz. Linked to construction work ? Run5-7-8-9: sustained diverging channels.
sub07 - run5 2obj: delay in one trial, maybe trials are shifted. Also same peak in PSD.
sub08 - run3 2obj: answered once during the presentation of the sentence. same peak in PSD.
sub09: same peak in PSD but even bigger. Huge ammount of noise in frontal sensors. Also looks like there is a jitter on the image presentation, also for sub08 but not really before (maybe on the onset but not the end).
sub10 - same jitter, same peak in PSD, also hige ammount of noise all over. 
sub11 - run1: one press during trial + run4 on during delay. run5: huge jumps + one huge fuckup in the triggers. Trials may be shifted. One button press at the begining of a trial in run6. Super fucking weird channel jumps in run7. On press before image on run 8. Super weird high sustained channels on run 9 + one press during the image. What a clusterfuck!
sub12 - run4 and 7: fckin weird ch jump. run5-6-7: weird peak in the PSD at 55hz... no run 10 ?
sub13 - run1: multiple answers during trials. Weird ch jumps in run7. No run10.
sub14: just fucking noisy all over.
sub15 - run1: button press jsut before a trial. run6: one trial is shifted. 
sub16: bit noisy but looks ok. problem in run8?
